"use strict";(self.webpackChunkPanelZakladu=self.webpackChunkPanelZakladu||[]).push([[867],{1867:(I,f,o)=>{o.r(f),o.d(f,{CustomersRouterModule:()=>j,routes:()=>_});var d=o(9584),t=o(9212),r=o(8677),y=o(5485),h=o(3501),k=o(9862),w=o(7191),Z=o(9024);let p=(()=>{class n{constructor(e,i){this.podreczne_=e,this.listonosz=i,this.listaKlientow=[],this.filter=0,this.newCustomersInLast30Days=0,this.customerMostVisit=void 0,this.visitsAvg=0,this.page=1,this.pageSize=12,this.iloscKlientow=12,this.ladowanieDanych=!1,this.searchValue=""}ustawFilter(e){this.filter=e.target.value}pobierzDane(){let e;switch(this.filter){case 0:e=h.b.listaKlientowCalosc;break;case this.podreczne_.danePodreczneObiekt.zalogowanyUzytkownik?.id:e=h.b.listaKlientowZalogowanegoUzytkownika;break;default:e=h.b.listaKlientowUzytkownika+"/"+this.filter}let i=new k.LE;i=i.append("page",this.page),i=i.append("finder",this.searchValue),this.ladowanieDanych=!0,this.listonosz.pobierz(e,i).then(a=>{this.listaKlientow=[],a.lista.forEach(l=>{this.listaKlientow.push(new y.N(l))}),this.iloscKlientow=a.size,this.customerMostVisit=a.customerMostVisit,this.newCustomersInLast30Days=a.newCustomersInLast30Days,this.pageSize=a.limit,this.visitsAvg=a.visitsAvg}).catch(a=>{console.log(a)}).finally(()=>{this.ladowanieDanych=!1})}onSearchChange(e){e.target&&this.wyszukiwarkaSub.next(e.target.value)}static#t=this.\u0275fac=function(i){return new(i||n)(t.LFG(w.v),t.LFG(Z.l))};static#e=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),v=(()=>{class n{constructor(e,i,a){this.modal=e,this.lista_=i,this.podreczne_=a}ngOnInit(){this.sub=this.podreczne_.danePodreczneObserveble.subscribe(e=>{e&&e.zalogowanyUzytkownik&&(this.lista_.filter=e.zalogowanyUzytkownik.id,this.lista_.pobierzDane(),this.sub&&this.sub.unsubscribe())})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(r.FF),t.Y36(p),t.Y36(w.v))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-lista-klientow-pracownik"]],standalone:!0,features:[t.jDz],decls:4,vars:0,consts:[[1,"naglowekZolty"],[1,"naglowek1Wzoltym"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Lista klient\xf3w"),t.qZA()(),t._UZ(3,"router-outlet"))},dependencies:[d.lC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:2000;overflow-y:auto}"]})}return n})();var b=o(1524),u=o(590),T=o(234);let C=(()=>{class n{constructor(e){this.lista_=e,this.faCalculator=u.lTt,this.faGreaterThan=u.WqQ,this.faUsersBetweenLines=u.LyI,this.faPlus=u.r8p,this.faPlusMinus=u.Mvz,this.faGreaterThanEqual=u.GJP,this.znalezionyNajczestszyKlient=null}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(p))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-lista-klientow-podsumowanie"]],standalone:!0,features:[t.jDz],decls:5,vars:9,consts:[[1,"blockContainer"],["smallText","","titile","Suma klient\xf3w",3,"icon","value"],["smallText","Nowi klienci w ostatnich <span class='active'>30</span> dniach","titile","Ostatnie  dni",3,"icon","value"],["smallText","\u015arednia ilo\u015b\u0107 wizyt","titile","\u015ared. wizyt",3,"icon","value"],["smallText","Najwi\u0119cej wizyt klienta","titile","Najw. wizyt",3,"icon","last","value"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-information-div-for-schedule",1)(2,"app-information-div-for-schedule",2)(3,"app-information-div-for-schedule",3)(4,"app-information-div-for-schedule",4),t.qZA()),2&i&&(t.xp6(1),t.Q6J("icon",a.faPlusMinus)("value",a.lista_.iloscKlientow),t.xp6(1),t.Q6J("icon",a.faUsersBetweenLines)("value",a.lista_.newCustomersInLast30Days),t.xp6(1),t.Q6J("icon",a.faCalculator)("value",a.lista_.visitsAvg),t.xp6(1),t.Q6J("icon",a.faGreaterThanEqual)("last",!0)("value",null!=(null==a.lista_.customerMostVisit?null:a.lista_.customerMostVisit.visitCount)?null==a.lista_.customerMostVisit?null:a.lista_.customerMostVisit.visitCount:0))},dependencies:[T.K],styles:["h3[_ngcontent-%COMP%]{text-align:center;width:100%}.blockContainer[_ngcontent-%COMP%]{width:100%;display:flex;padding-top:20px;justify-content:center;column-gap:20px}"]})}return n})();var c=o(6814),x=o(3850);function U(n,s){if(1&n&&(t.TgZ(0,"option",8),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.Q6J("selected",e.id==i.lista_.filter)("value",e.id),t.xp6(1),t.AsE(" ",e.firstname," ",e.lastname," ")}}function K(n,s){if(1&n&&(t.ynx(0),t.YNc(1,U,2,4,"option",7),t.BQk()),2&n){const e=s.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.id!=(null==i.podreczne_.danePodreczneObiekt.zalogowanyUzytkownik?null:i.podreczne_.danePodreczneObiekt.zalogowanyUzytkownik.id))}}const m=n=>({switchButtonAktywny:n}),g=n=>[0,n],A=n=>({width:n});function O(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"button",3),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return a.lista_.filter=0,t.KtG(a.lista_.pobierzDane())}),t._uU(3," Zak\u0142adu "),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return a.lista_.filter=null==a.podreczne_.danePodreczneObiekt.zalogowanyUzytkownik?null:a.podreczne_.danePodreczneObiekt.zalogowanyUzytkownik.id,t.KtG(a.lista_.pobierzDane())}),t._uU(5," Zalogowanego u\u017cytkownika "),t.qZA(),t.TgZ(6,"select",4),t.NdJ("change",function(a){t.CHM(e);const l=t.oxw();return l.lista_.ustawFilter(a),t.KtG(l.lista_.pobierzDane())}),t.TgZ(7,"option",5),t._uU(8," Wybierz "),t.qZA(),t.YNc(9,K,2,1,"ng-container",6),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngClass",t.VKq(7,m,0==e.lista_.filter)),t.xp6(2),t.Q6J("ngClass",t.VKq(9,m,e.lista_.filter==(null==e.podreczne_.danePodreczneObiekt.zalogowanyUzytkownik?null:e.podreczne_.danePodreczneObiekt.zalogowanyUzytkownik.id))),t.xp6(2),t.Q6J("ngClass",t.VKq(13,m,-1==t.VKq(11,g,null==e.podreczne_.danePodreczneObiekt.zalogowanyUzytkownik?null:e.podreczne_.danePodreczneObiekt.zalogowanyUzytkownik.id).indexOf(e.lista_.filter)))("ngStyle",t.VKq(17,A,-1!=t.VKq(15,g,null==e.podreczne_.danePodreczneObiekt.zalogowanyUzytkownik?null:e.podreczne_.danePodreczneObiekt.zalogowanyUzytkownik.id).indexOf(e.lista_.filter)?"105px":"")),t.xp6(1),t.Q6J("disabled",!0)("selected",-1!=t.VKq(19,g,null==e.podreczne_.danePodreczneObiekt.zalogowanyUzytkownik?null:e.podreczne_.danePodreczneObiekt.zalogowanyUzytkownik.id).indexOf(e.lista_.filter)),t.xp6(2),t.Q6J("ngForOf",e.podreczne_.danePodreczneObiekt.pracownicy)}}let D=(()=>{class n{constructor(e,i,a){this.podreczne_=e,this.lista_=i,this.token_=a}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(w.v),t.Y36(p),t.Y36(x.B))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-lista-klientow-filter"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","filtry",4,"ngIf"],[1,"filtry"],[1,"switchButtonDiv"],[1,"switchButton",3,"ngClass","click"],[1,"switchButton",3,"ngClass","ngStyle","change"],[3,"disabled","selected"],[4,"ngFor","ngForOf"],[3,"selected","value",4,"ngIf"],[3,"selected","value"]],template:function(i,a){1&i&&t.YNc(0,O,10,21,"div",0),2&i&&t.Q6J("ngIf",a.token_.czyWlasciciel())},dependencies:[c.ez,c.mk,c.sg,c.O5,c.PC],styles:[".filtry[_ngcontent-%COMP%]{text-align:center;width:100%;float:left;padding-top:4px;padding-bottom:4px}"]})}return n})();var L=o(3866),P=o(105);function q(n,s){1&n&&(t.TgZ(0,"th"),t._uU(1,"Nr"),t.qZA(),t.TgZ(2,"th"),t._uU(3,"Imi\u0119"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Nazwisko"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Ostatnia wizyta"),t.qZA(),t.TgZ(8,"th",3),t._uU(9,"Data do\u0142\u0105czenia"),t.qZA(),t.TgZ(10,"th",3),t._uU(11,"Adres e-mail"),t.qZA(),t.TgZ(12,"th",3),t._uU(13,"Numer telefonu"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Wizyty"),t.qZA(),t.TgZ(16,"th",4),t._uU(17,"Zarz\u0105dzanie"),t.qZA())}function F(n,s){if(1&n&&(t.TgZ(0,"span",13),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij("(suma ",e.wizytWZakladzie.length+e.wizyty.length,")")}}function M(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"td"),t._uU(1),t.qZA(),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"td",3),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"td",3),t._uU(13),t.qZA(),t.TgZ(14,"td",3),t._uU(15),t.qZA(),t.TgZ(16,"td")(17,"span",5),t._uU(18),t.qZA(),t.YNc(19,F,2,1,"span",6),t.qZA(),t.TgZ(20,"td",7)(21,"div",8)(22,"button",9),t._uU(23,"Wybierz:"),t.qZA(),t.TgZ(24,"div",10)(25,"button",11),t.NdJ("click",function(){const l=t.CHM(e).$implicit,z=t.oxw();return t.KtG(z.wyswietlInformacje(l))}),t._uU(26,"Wy\u015bwietl wizyty"),t.qZA(),t.TgZ(27,"button",12),t._uU(28,"Usu\u0144"),t.qZA()()()()}if(2&n){const e=s.index,i=s.$implicit;t.xp6(1),t.Oqu(e),t.xp6(2),t.Oqu(i.firstName),t.xp6(2),t.Oqu(i.lastName),t.xp6(2),t.Oqu(t.xi3(8,9,i.dataOstatniejWizyty(),"dd.MM.yyyy")),t.xp6(3),t.Oqu(t.xi3(11,12,i.cust_create_time,"dd.MM.yyyy")),t.xp6(3),t.Oqu(i.email),t.xp6(2),t.Oqu(i.phone),t.xp6(3),t.hij(" ",i.wizyty.length,""),t.xp6(1),t.Q6J("ngIf",i.wizyty.length!=i.wizytWZakladzie.length)}}let N=(()=>{class n{constructor(e,i,a){this.router_=e,this.modal=i,this.lista_=a,this.Number=Number,this.Math=Math}wyswietlInformacje(e){this.router_.navigate([`panelPracownika/customers/${e.id}/${this.lista_.filter}`])}test(){console.log(2)}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(d.F0),t.Y36(r.FF),t.Y36(p))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-lista-klientow-tablica"]],standalone:!0,features:[t.jDz],decls:3,vars:6,consts:[[3,"collectionSize","data","loading","pageSize","search","title","changeData","searchChange"],["TemplateId","thead"],["TemplateId","tbody"],[1,"NotInMobile"],[1,"menageButton"],[1,"wizytyKlientaWZakladzie"],["class","sumaWizytKlientaWZakladzie",4,"ngIf"],[1,"small"],["container","body","ngbDropdown",""],["ngbDropdownToggle","","type","button",1,"btn","btn-outline-primary","btn-sm"],["ngbDropdownMenu",""],["ngbDropdownItem","",3,"click"],["ngbDropdownItem",""],[1,"sumaWizytKlientaWZakladzie"]],template:function(i,a){1&i&&(t.TgZ(0,"app-table",0),t.NdJ("changeData",function(){return a.lista_.pobierzDane()})("searchChange",function(z){return a.lista_.searchValue=z,a.lista_.pobierzDane()}),t.YNc(1,q,18,0,"ng-template",1)(2,M,29,15,"ng-template",2),t.qZA()),2&i&&t.Q6J("collectionSize",a.lista_.iloscKlientow)("data",a.lista_.listaKlientow)("loading",a.lista_.ladowanieDanych)("pageSize",15)("search",!0)("title","Lista klient\xf3w:")},dependencies:[c.O5,r.Vi,r.jt,r.TH,L.y,P.a,c.uU,r.iD],styles:[".sumaWizytKlientaWZakladzie[_ngcontent-%COMP%]{color:#0e064a}.wizytyKlientaWZakladzie[_ngcontent-%COMP%]{font-weight:700;padding-right:5px}"]})}return n})();const _=[{path:"",component:v,children:[{path:"",component:(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-customers-default"]],standalone:!0,features:[t.jDz],decls:4,vars:0,consts:[[1,"NoMax1200"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"app-lista-klientow-podsumowanie"),t.qZA(),t._UZ(2,"app-lista-klientow-filter")(3,"app-lista-klientow-tablica"))},dependencies:[C,D,N]})}return n})()},{path:":id/:employees",component:b.A}]}];let j=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#i=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(_),d.Bz]})}return n})()}}]);