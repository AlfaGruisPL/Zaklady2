<div class="modal-header">
  <h4 class="modal-title">Rejestracja wizyty:</h4>
  <button type="button" class="btn-close" aria-label="Close" (click)="activeModal.close('Nie')"></button>
</div>
<form [formGroup]="formualrzRejestracjiWizyty" (ngSubmit)="wyslij()">

  <div class="modal-body">
    <table>
      <tr>
        <td>
          Klient*:
        </td>
        <td>
          <input placeholder="imie" formControlName="imie">
          <input placeholder="nazwisko" formControlName='nazwisko'>
        </td>
      </tr>
      <tr>
        <td>
          Termin*:
        </td>
        <td>
          <input type="date" formControlName='termin'>
        </td>
      </tr>
      <tr>
        <td>
          Godziny*:
        </td>
        <td>
          <input type="time" value="12:12" formControlName='poczatek'> <input type="time" formControlName='koniec'>
        </td>
      </tr>
      <tr>
        <td>
          Telefon*:
        </td>
        <td>
          <select type="text" formControlName='prefix'>
            <option>+48</option>
            <option>+380</option>
          </select><input type="tel" formControlName='telefon'>
        </td>

      </tr>
      <tr>
        <td>Email:</td>
        <td><input type="email" formControlName='email'></td>
      </tr>
      <tr>
        <th>Konifguracja</th>
        <td>Ręczna: <input type="radio" name="type" value="manual" (click)="zmianaOkna($event)" [(ngModel)]="tryb"
                           [ngModelOptions]="{standalone: true}">
          &nbsp; &nbsp;Automatyczna:
          <input type="radio" (click)="zmianaOkna($event)" [(ngModel)]="tryb" [ngModelOptions]="{standalone: true}"
                 name="type"
                 value="auto"></td>

      </tr>
      <tr *ngIf="token_.czyWlasciciel()">
        <th>Przypisanie:</th>
        <td>
          <select formControlName='wykonawca'>

            <option [defaultSelected]="true" [value]="kalendarz_.wlasciciel.id"
            >{{kalendarz_.wlasciciel.imie + " " + kalendarz_.wlasciciel.imie}}
            </option>
            <option [value]="pracownik.id"
                    *ngFor="let pracownik of kalendarz_.pracownicy">{{pracownik.imie + " " + pracownik.nazwisko}}
            </option>
          </select>
        </td>
      </tr>
      <tr>
        <th>Cena</th>
        <td><input type="number" formControlName="cena" style="width: 100px">zł</td>
      </tr>
    </table>
    <div class="auto" *ngIf="tryb =='auto'"><h4>Usługi ({{obliczCene()}}zł)</h4>
      <div class="listaUslug">

        <ul>
          <li *ngFor="let usluga of uslugi_.listaUslug">
            <input type="checkbox" (click)="klikniecie($event,usluga)">&nbsp;{{usluga.nazwa}}</li>
        </ul>
      </div>
    </div>

    <div class="manual" *ngIf="tryb =='manual'"><h4>Usługi</h4>
      <table>
        <tr>
          <th>Opis usługi</th>
          <td><textarea formControlName="opis" placeholder="Opis zaplanowanych usług"></textarea></td>
        </tr>
      </table>
    </div>


  </div>
  <div class="modal-footer">
    <p class="info">
      Utworzenie wizyty jest jednoznaczne z powiadomieniem użytkownika w formie email oraz sms(jeżeli usługa włączona).
    </p>

    <div>

      <button type="button" (click)="activeModal.close('anuluj')">
        Anuluj
      </button>&nbsp;
      <button type="submit" [disabled]="formualrzRejestracjiWizyty.invalid">Zarejestruj</button>
    </div>

  </div>
</form>
