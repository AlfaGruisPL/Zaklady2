"use strict";(self.webpackChunkPanelZakladu=self.webpackChunkPanelZakladu||[]).push([[27],{27:(J,d,a)=>{a.r(d),a.d(d,{routes:()=>B});var h=a(105),_=a(3866),c=a(6814),C=a(8581),u=a(3501),t=a(9212);let x=(()=>{class n{transform(e){return null==e||0==e.toString().length?"---":e>524288?`${(e/1048576).toFixed(2)} MB`:`${e} KB`}static#t=this.\u0275fac=function(i){return new(i||n)};static#n=this.\u0275pipe=t.Yjl({name:"fileSize",type:n,pure:!0,standalone:!0})}return n})();var F=a(8401),r=a(1259),f=a(9024);function Z(n,s){1&n&&(t.TgZ(0,"th"),t._uU(1,"Podgl\u0105d"),t.qZA(),t.TgZ(2,"th"),t._uU(3,"Lp"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Nazwa"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Rozmiar"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Data wys\u0142ania"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Zarz\u0105dzaj"),t.qZA())}function M(n,s){if(1&n&&t._UZ(0,"img",7),2&n){const e=t.oxw().$implicit,i=t.oxw();t.Q6J("src",i.env.api+"/pliki/image/"+e.id,t.LSH)}}function P(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"td",3),t.YNc(1,M,1,1,"ng-template",null,4,t.W1O),t._UZ(3,"img",5),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"fileSize"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td")(15,"button",6),t.NdJ("click",function(){const l=t.CHM(e).$implicit,g=t.oxw();return t.KtG(g.deleteImage(l.id))}),t._uU(16,"Usu\u0144"),t.qZA()()}if(2&n){const e=s.index,i=s.$implicit,o=t.MAs(2),l=t.oxw();t.xp6(3),t.Q6J("ngbPopover",o)("src",l.env.api+"/pliki/image/"+i.id,t.LSH),t.xp6(2),t.Oqu(e),t.xp6(2),t.Oqu(i.nazwa),t.xp6(2),t.Oqu(t.lcZ(10,6,i.size)),t.xp6(3),t.Oqu(t.xi3(13,8,i.dataUtworzenia,"dd.MM.yyyy HH:mm"))}}const O=()=>[10,15,20,35,50,100];let T=(()=>{class n{constructor(e,i){this.files_=e,this.http_=i,this.env=C.N}deleteImage(e){this.http_.usun(u.b.deleteImage+"/"+e).then(i=>{}).catch(()=>{}).finally(()=>{this.files_.FetchDataFromDB()})}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(r.n),t.Y36(f.l))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-files-table"]],standalone:!0,features:[t.jDz],decls:3,vars:9,consts:[[3,"async","collectionSize","data","loading","pageSize","paggiantionMaxElementArray","paggiantion","title"],["TemplateId","thead"],["TemplateId","tbody"],[2,"width","60px","text-align","left"],["bigImage",""],["popoverTitle","Zd\u0119cie:","triggers","mouseenter:mouseleave",2,"max-width","60px","max-height","30px",3,"ngbPopover","src"],[1,"domyslnyButtonUsun","noPaddingTopBottom",3,"click"],[2,"max-width","400px","max-height","400px",3,"src"]],template:function(i,o){1&i&&(t.TgZ(0,"app-table",0),t.YNc(1,Z,12,0,"ng-template",1)(2,P,17,11,"ng-template",2),t.qZA()),2&i&&t.Q6J("async",!1)("collectionSize",o.files_.filesData.length)("data",o.files_.filesData)("loading",o.files_.filesDataLoading)("pageSize",15)("paggiantionMaxElementArray",t.DdM(8,O))("paggiantion",!0)("title","Lista plik\xf3w zak\u0142adu:")},dependencies:[h.a,_.y,c.uU,x,F.o8],encapsulation:2})}return n})(),U=(()=>{class n{constructor(e){this.files_=e}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(r.n))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-files-information-panel"]],standalone:!0,features:[t.jDz],decls:8,vars:2,template:function(i,o){1&i&&(t.TgZ(0,"h4"),t._uU(1,"Pliki:"),t.qZA(),t.TgZ(2,"table")(3,"tr")(4,"th"),t._uU(5,"Pliki"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()()),2&i&&(t.xp6(7),t.AsE("",o.files_.filesData.length," na ",o.files_.fileLimit,""))},styles:["table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-right:10px}"]})}return n})();var y=a(321),m=a(5597),b=a(590),A=a(5412),v=a(3e3),w=a(6850);function z(n,s){if(1&n&&(t.TgZ(0,"p",12),t._uU(1," \u23f3Wysy\u0142anie... "),t._UZ(2,"fa-icon",13),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("icon",e.faGear)}}function k(n,s){1&n&&(t.TgZ(0,"p",14),t._uU(1,"\u2705Udane!"),t.qZA())}function S(n,s){1&n&&(t.TgZ(0,"p",15),t._uU(1,"\u274cB\u0142\u0105d!"),t.qZA())}function D(n,s){1&n&&(t.TgZ(0,"p",16),t._uU(1,"\xa0"),t.qZA())}function I(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),l=t.MAs(8);return t.KtG(o.onUpload(l))}),t._uU(1," Wy\u015blij "),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled","uploading"==e.status)}}let q=(()=>{class n{constructor(e,i,o,l){this.error_=e,this.http_=i,this.files_=o,this.toast_=l,this.status="initial",this.file=null,this.imageSrc="",this.Math=Math,this.faGear=b.gr5}onChange(e){const i=e.target.files[0];i&&(this.status="initial",this.file=i)}onUpload(e){if(this.files_.filesData.length>=this.files_.fileLimit)this.toast_.komunikatInfo(A.k.fileLimit);else if(this.file){const i=new FormData;i.append("file",this.file,this.file.name),this.status="uploading",this.http_.wyslij(u.b.sendImage,i).then(o=>{this.status="success",this.file=null,e.value=""}).catch(o=>{this.status="fail",this.error_.fileUploadAnalyze(o)}).finally(()=>{this.files_.FetchDataFromDB()})}}readURL(e){if(e.target.files&&e.target.files[0]){const i=e.target.files[0],o=new FileReader;o.onload=l=>this.imageSrc=o.result,o.readAsDataURL(i)}}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(v.S),t.Y36(f.l),t.Y36(r.n),t.Y36(w.W))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-upload-file"]],standalone:!0,features:[t.jDz],decls:13,vars:6,consts:[[1,"mainContainerFile"],[1,"pInfo",3,"ngSwitch"],["class","send",4,"ngSwitchCase"],["class","success",4,"ngSwitchCase"],["class","fail",4,"ngSwitchCase"],["class","wait",4,"ngSwitchDefault"],[1,"sendFileContainer"],["type","file",1,"file-input",3,"change"],["fileUpload",""],[1,"sendFileButton",3,"click"],["class","uploadFile",3,"disabled","click",4,"ngIf"],["alt","your image","id","blah",3,"src"],[1,"send"],["animation","spin",1,"gear",3,"icon"],[1,"success"],[1,"fail"],[1,"wait"],[1,"uploadFile",3,"disabled","click"]],template:function(i,o){if(1&i){const l=t.EpF();t.TgZ(0,"div",0)(1,"section",1),t.YNc(2,z,3,1,"p",2)(3,k,2,0,"p",3)(4,S,2,0,"p",4)(5,D,2,0,"p",5),t.qZA(),t.TgZ(6,"div",6)(7,"input",7,8),t.NdJ("change",function(p){return o.onChange(p),o.readURL(p)}),t.qZA(),t.TgZ(9,"button",9),t.NdJ("click",function(){t.CHM(l);const p=t.MAs(8);return t.KtG(p.click())}),t._uU(10,"Wybierz plik"),t.qZA(),t.YNc(11,I,2,1,"button",10),t._UZ(12,"img",11),t.qZA()()}2&i&&(t.xp6(1),t.Q6J("ngSwitch",o.status),t.xp6(1),t.Q6J("ngSwitchCase","uploading"),t.xp6(1),t.Q6J("ngSwitchCase","success"),t.xp6(1),t.Q6J("ngSwitchCase","fail"),t.xp6(7),t.Q6J("ngIf",o.file),t.xp6(1),t.Q6J("src",o.imageSrc||"http://placehold.it/30",t.LSH))},dependencies:[c.ez,c.O5,c.RF,c.n9,c.ED,y.K,m.uH,m.BN],styles:[".mainContainerFile[_ngcontent-%COMP%]{display:flex;flex-direction:column}.mainContainerFile[_ngcontent-%COMP%]   .sendFileContainer[_ngcontent-%COMP%]{border-radius:4px;overflow:hidden;display:flex;border:1px solid black;width:280px;height:30px;position:relative}.mainContainerFile[_ngcontent-%COMP%]   .sendFileContainer[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{visibility:hidden;position:absolute;z-index:-100;pointer-events:none}.mainContainerFile[_ngcontent-%COMP%]   .sendFileContainer[_ngcontent-%COMP%]   .uploadFile[_ngcontent-%COMP%]{border:none;background:rgba(0,128,0,.1);letter-spacing:2px;flex-grow:2}.mainContainerFile[_ngcontent-%COMP%]   .sendFileContainer[_ngcontent-%COMP%]   .uploadFile[_ngcontent-%COMP%]:hover{cursor:pointer;background:rgba(0,128,0,.2)}.mainContainerFile[_ngcontent-%COMP%]   .sendFileContainer[_ngcontent-%COMP%]   .sendFileButton[_ngcontent-%COMP%]{box-shadow:none;width:230px;letter-spacing:2px;border:none;background:transparent;border-right:1px solid black}.mainContainerFile[_ngcontent-%COMP%]   .sendFileContainer[_ngcontent-%COMP%]   .sendFileButton[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.08);cursor:pointer}.mainContainerFile[_ngcontent-%COMP%]   .sendFileContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:auto;max-height:30px}.mainContainerFile[_ngcontent-%COMP%]   .fileInfoContainer[_ngcontent-%COMP%]{display:flex}.mainContainerFile[_ngcontent-%COMP%]   .pInfo[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{color:#00623e;height:20px;width:20px}.mainContainerFile[_ngcontent-%COMP%]   .pInfo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;padding-bottom:0;font-weight:bolder;text-shadow:0px 0px 1px rgba(0,0,0,.2588235294)}.mainContainerFile[_ngcontent-%COMP%]   .pInfo[_ngcontent-%COMP%]   .send[_ngcontent-%COMP%]{color:#002c93}.mainContainerFile[_ngcontent-%COMP%]   .pInfo[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#17a600}.mainContainerFile[_ngcontent-%COMP%]   .pInfo[_ngcontent-%COMP%]   .fail[_ngcontent-%COMP%]{color:#af0000}.mainContainerFile[_ngcontent-%COMP%]   .pInfo[_ngcontent-%COMP%]   .wait[_ngcontent-%COMP%]{color:#00a66c}"]})}return n})();const B=[{path:"",component:(()=>{class n{constructor(e){this.files_=e}ngOnInit(){this.files_.FetchDataFromDB()}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(r.n))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-files"]],standalone:!0,features:[t.jDz],decls:8,vars:0,consts:[[1,"naglowekZolty"],[1,"naglowek1Wzoltym"],[1,"naglowek1Wzoltym2"],[1,"controlPanel"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"span",1),t._uU(2,"Zarz\u0105dzanie zdj\u0119ciami i plikami"),t.qZA(),t._UZ(3,"span",2),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"app-files-information-panel")(6,"app-upload-file"),t.qZA(),t._UZ(7,"app-files-table"))},dependencies:[T,U,q],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.controlPanel[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;margin-top:10px;margin-bottom:10px;padding-right:10px}"]})}return n})()}]}}]);