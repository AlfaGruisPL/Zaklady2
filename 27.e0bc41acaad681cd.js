"use strict";(self.webpackChunkPanelZakladu=self.webpackChunkPanelZakladu||[]).push([[27],{27:(L,d,o)=>{o.r(d),o.d(d,{routes:()=>J});var h=o(105),_=o(3866),c=o(6814),C=o(8581),u=o(3501),t=o(9212);let F=(()=>{class e{transform(n){return null==n||0==n.toString().length?"---":n>524288?`${(n/1048576).toFixed(2)} MB`:`${(n/1024).toFixed(2)} KB`}static#t=this.\u0275fac=function(i){return new(i||e)};static#n=this.\u0275pipe=t.Yjl({name:"fileSize",type:e,pure:!0,standalone:!0})}return e})();var x=o(8401),p=o(1259),f=o(9024);function Z(e,s){1&e&&(t.TgZ(0,"th"),t._uU(1,"Podgl\u0105d"),t.qZA(),t.TgZ(2,"th"),t._uU(3,"Lp"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Nazwa"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Rozmiar"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Data wys\u0142ania"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Zarz\u0105dzaj"),t.qZA())}function M(e,s){if(1&e&&t._UZ(0,"img",8),2&e){const n=t.oxw().$implicit,i=t.oxw();t.Q6J("src",i.env.api+"/pliki/image/"+n.id,t.LSH)}}const P=e=>({color:e});function O(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"td",3),t.YNc(1,M,1,1,"ng-template",null,4,t.W1O),t._UZ(3,"img",5),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td",6),t._uU(9),t.ALo(10,"fileSize"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"td")(15,"button",7),t.NdJ("click",function(){const l=t.CHM(n).$implicit,r=t.oxw();return t.KtG(r.deleteImage(l.id))}),t._uU(16,"Usu\u0144"),t.qZA()()}if(2&e){const n=s.index,i=s.$implicit,a=t.MAs(2),l=t.oxw();t.xp6(3),t.Q6J("ngbPopover",a)("src",l.env.api+"/pliki/image/"+i.id,t.LSH),t.xp6(2),t.Oqu(n),t.xp6(2),t.Oqu(i.nazwa),t.xp6(1),t.Q6J("ngStyle",t.VKq(12,P,i.size>524288?"red":"")),t.xp6(1),t.Oqu(t.lcZ(10,7,i.size)),t.xp6(3),t.Oqu(t.xi3(13,9,i.dataUtworzenia,"dd.MM.yyyy HH:mm"))}}const T=()=>[10,15,20,35,50,100];let y=(()=>{class e{constructor(n,i){this.files_=n,this.http_=i,this.env=C.N,this.value=""}deleteImage(n){this.http_.usun(u.b.deleteImage+"/"+n).then(i=>{}).catch(()=>{}).finally(()=>{this.files_.FetchDataFromDB()})}getDataByFilter(n){return 0==this.value.length?n:n.filter(i=>-1!=i.nazwa.toLowerCase().trim().indexOf(this.value.toLowerCase().trim()))}setDataWithSearch(n){this.value=n}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(p.n),t.Y36(f.l))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-files-table"]],standalone:!0,features:[t.jDz],decls:3,vars:10,consts:[[3,"async","collectionSize","data","loading","pageSize","paggiantionMaxElementArray","paggiantion","search","title","searchChange"],["TemplateId","thead"],["TemplateId","tbody"],[2,"width","60px","text-align","left"],["bigImage",""],["popoverTitle","Zd\u0119cie:","triggers","mouseenter:mouseleave",2,"max-width","60px","max-height","30px",3,"ngbPopover","src"],[3,"ngStyle"],[1,"domyslnyButtonUsun","noPaddingTopBottom",3,"click"],[2,"max-width","400px","max-height","400px",3,"src"]],template:function(i,a){1&i&&(t.TgZ(0,"app-table",0),t.NdJ("searchChange",function(r){return a.setDataWithSearch(r)}),t.YNc(1,Z,12,0,"ng-template",1)(2,O,17,14,"ng-template",2),t.qZA()),2&i&&t.Q6J("async",!1)("collectionSize",a.files_.filesData.length)("data",a.getDataByFilter(a.files_.filesData))("loading",a.files_.filesDataLoading)("pageSize",15)("paggiantionMaxElementArray",t.DdM(9,T))("paggiantion",!0)("search",!0)("title","Lista plik\xf3w zak\u0142adu:")},dependencies:[h.a,_.y,c.uU,F,x.o8,c.ez,c.PC],encapsulation:2})}return e})(),U=(()=>{class e{constructor(n){this.files_=n}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(p.n))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-files-information-panel"]],standalone:!0,features:[t.jDz],decls:8,vars:2,template:function(i,a){1&i&&(t.TgZ(0,"h4"),t._uU(1,"Pliki:"),t.qZA(),t.TgZ(2,"table")(3,"tr")(4,"th"),t._uU(5,"Pliki"),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()()),2&i&&(t.xp6(7),t.AsE("",a.files_.filesData.length," na ",a.files_.fileLimit,""))},styles:["table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-right:10px}"]})}return e})();var b=o(321),m=o(5597),v=o(590),w=o(5412),A=o(3e3),z=o(6850);function S(e,s){if(1&e&&(t.TgZ(0,"p",12),t._uU(1," \u23f3Wysy\u0142anie... "),t._UZ(2,"fa-icon",13),t.qZA()),2&e){const n=t.oxw();t.xp6(2),t.Q6J("icon",n.faGear)}}function D(e,s){1&e&&(t.TgZ(0,"p",14),t._uU(1,"\u2705Udane!"),t.qZA())}function k(e,s){1&e&&(t.TgZ(0,"p",15),t._uU(1,"\u274cB\u0142\u0105d!"),t.qZA())}function I(e,s){1&e&&(t.TgZ(0,"p",16),t._uU(1,"\xa0"),t.qZA())}function q(e,s){if(1&e){const n=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(n);const a=t.oxw(),l=t.MAs(8);return t.KtG(a.onUpload(l))}),t._uU(1," Wy\u015blij "),t.qZA()}if(2&e){const n=t.oxw();t.Q6J("disabled","uploading"==n.status)}}let B=(()=>{class e{constructor(n,i,a,l){this.error_=n,this.http_=i,this.files_=a,this.toast_=l,this.status="initial",this.file=null,this.imageSrc="",this.Math=Math,this.faGear=v.gr5}onChange(n){const i=n.target.files[0];i&&(this.status="initial",this.file=i)}onUpload(n){if(this.files_.filesData.length>=this.files_.fileLimit)this.toast_.komunikatInfo(w.k.fileLimit);else if(this.file){const i=new FormData;i.append("file",this.file,this.file.name),this.status="uploading",this.http_.wyslij(u.b.sendImage,i).then(a=>{this.status="success",this.file=null,n.value=""}).catch(a=>{this.status="fail",this.error_.fileUploadAnalyze(a)}).finally(()=>{this.files_.FetchDataFromDB()})}}readURL(n){if(n.target.files&&n.target.files[0]){const i=n.target.files[0],a=new FileReader;a.onload=l=>this.imageSrc=a.result,a.readAsDataURL(i)}}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(A.S),t.Y36(f.l),t.Y36(p.n),t.Y36(z.W))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-upload-file"]],standalone:!0,features:[t.jDz],decls:13,vars:6,consts:[[1,"mainContainerFile"],[1,"pInfo",3,"ngSwitch"],["class","send",4,"ngSwitchCase"],["class","success",4,"ngSwitchCase"],["class","fail",4,"ngSwitchCase"],["class","wait",4,"ngSwitchDefault"],[1,"sendFileContainer"],["type","file",1,"file-input",3,"change"],["fileUpload",""],[1,"sendFileButton",3,"click"],["class","uploadFile",3,"disabled","click",4,"ngIf"],["alt","your image","id","blah",3,"src"],[1,"send"],["animation","spin",1,"gear",3,"icon"],[1,"success"],[1,"fail"],[1,"wait"],[1,"uploadFile",3,"disabled","click"]],template:function(i,a){if(1&i){const l=t.EpF();t.TgZ(0,"div",0)(1,"section",1),t.YNc(2,S,3,1,"p",2)(3,D,2,0,"p",3)(4,k,2,0,"p",4)(5,I,2,0,"p",5),t.qZA(),t.TgZ(6,"div",6)(7,"input",7,8),t.NdJ("change",function(g){return a.onChange(g),a.readURL(g)}),t.qZA(),t.TgZ(9,"button",9),t.NdJ("click",function(){t.CHM(l);const g=t.MAs(8);return t.KtG(g.click())}),t._uU(10,"Wybierz plik"),t.qZA(),t.YNc(11,q,2,1,"button",10),t._UZ(12,"img",11),t.qZA()()}2&i&&(t.xp6(1),t.Q6J("ngSwitch",a.status),t.xp6(1),t.Q6J("ngSwitchCase","uploading"),t.xp6(1),t.Q6J("ngSwitchCase","success"),t.xp6(1),t.Q6J("ngSwitchCase","fail"),t.xp6(7),t.Q6J("ngIf",a.file),t.xp6(1),t.Q6J("src",a.imageSrc||"http://placehold.it/30",t.LSH))},dependencies:[c.ez,c.O5,c.RF,c.n9,c.ED,b.K,m.uH,m.BN],styles:[".mainContainerFile[_ngcontent-%COMP%]{display:flex;flex-direction:column}.mainContainerFile[_ngcontent-%COMP%]   .sendFileContainer[_ngcontent-%COMP%]{border-radius:4px;overflow:hidden;display:flex;border:1px solid black;width:280px;height:30px;position:relative}.mainContainerFile[_ngcontent-%COMP%]   .sendFileContainer[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{visibility:hidden;position:absolute;z-index:-100;pointer-events:none}.mainContainerFile[_ngcontent-%COMP%]   .sendFileContainer[_ngcontent-%COMP%]   .uploadFile[_ngcontent-%COMP%]{border:none;background:rgba(0,128,0,.1);letter-spacing:2px;flex-grow:2}.mainContainerFile[_ngcontent-%COMP%]   .sendFileContainer[_ngcontent-%COMP%]   .uploadFile[_ngcontent-%COMP%]:hover{cursor:pointer;background:rgba(0,128,0,.2)}.mainContainerFile[_ngcontent-%COMP%]   .sendFileContainer[_ngcontent-%COMP%]   .sendFileButton[_ngcontent-%COMP%]{box-shadow:none;width:230px;letter-spacing:2px;border:none;background:transparent;border-right:1px solid black}.mainContainerFile[_ngcontent-%COMP%]   .sendFileContainer[_ngcontent-%COMP%]   .sendFileButton[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.08);cursor:pointer}.mainContainerFile[_ngcontent-%COMP%]   .sendFileContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:auto;max-height:30px}.mainContainerFile[_ngcontent-%COMP%]   .fileInfoContainer[_ngcontent-%COMP%]{display:flex}.mainContainerFile[_ngcontent-%COMP%]   .pInfo[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{color:#00623e;height:20px;width:20px}.mainContainerFile[_ngcontent-%COMP%]   .pInfo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;padding-bottom:0;font-weight:bolder;text-shadow:0px 0px 1px rgba(0,0,0,.2588235294)}.mainContainerFile[_ngcontent-%COMP%]   .pInfo[_ngcontent-%COMP%]   .send[_ngcontent-%COMP%]{color:#002c93}.mainContainerFile[_ngcontent-%COMP%]   .pInfo[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{color:#17a600}.mainContainerFile[_ngcontent-%COMP%]   .pInfo[_ngcontent-%COMP%]   .fail[_ngcontent-%COMP%]{color:#af0000}.mainContainerFile[_ngcontent-%COMP%]   .pInfo[_ngcontent-%COMP%]   .wait[_ngcontent-%COMP%]{color:#00a66c}"]})}return e})();const J=[{path:"",component:(()=>{class e{constructor(n){this.files_=n}ngOnInit(){this.files_.FetchDataFromDB()}static#t=this.\u0275fac=function(i){return new(i||e)(t.Y36(p.n))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-files"]],standalone:!0,features:[t.jDz],decls:8,vars:0,consts:[[1,"naglowekZolty"],[1,"naglowek1Wzoltym"],[1,"naglowek1Wzoltym2"],[1,"controlPanel"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0)(1,"span",1),t._uU(2,"Zarz\u0105dzanie zdj\u0119ciami i plikami"),t.qZA(),t._UZ(3,"span",2),t.qZA(),t.TgZ(4,"div",3),t._UZ(5,"app-files-information-panel")(6,"app-upload-file"),t.qZA(),t._UZ(7,"app-files-table"))},dependencies:[y,U,B],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.controlPanel[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;margin-top:10px;margin-bottom:10px;padding-right:10px}"]})}return e})()}]}}]);